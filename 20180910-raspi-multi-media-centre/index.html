

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="https://resource.tinychen.com/logos.png">
  <link rel="icon" href="https://resource.tinychen.com/logos.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="TinyChen">
  <meta name="keywords" content="">
  
    <meta name="description" content="小七比较喜欢在宿舍和室友一起看电影或听音乐，且对画质和音质要求较高，一般都是观看1080P的蓝光REMUX电影（约30G一部）和听无损音质的音乐（30M一首），且观看设备较多（电视盒子、电脑、手机），再加上平时需要下载电影且自己有写博客的习惯，博客和一些其他的重要资料也需要备份，因此决定使用树莓派3B+、一块移动硬盘和一个路由器搭建一个宿舍多媒体中心来满足这些需求。">
<meta property="og:type" content="article">
<meta property="og:title" content="树莓派3B+打造多媒体中心">
<meta property="og:url" content="https://tinychen.com/20180910-raspi-multi-media-centre/index.html">
<meta property="og:site_name" content="TinyChen&#39;s Studio - 互联网技术学习工作经验分享">
<meta property="og:description" content="小七比较喜欢在宿舍和室友一起看电影或听音乐，且对画质和音质要求较高，一般都是观看1080P的蓝光REMUX电影（约30G一部）和听无损音质的音乐（30M一首），且观看设备较多（电视盒子、电脑、手机），再加上平时需要下载电影且自己有写博客的习惯，博客和一些其他的重要资料也需要备份，因此决定使用树莓派3B+、一块移动硬盘和一个路由器搭建一个宿舍多媒体中心来满足这些需求。">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://resource.tinychen.com/20210617164850.jpg">
<meta property="article:published_time" content="2018-09-10T07:00:00.000Z">
<meta property="article:modified_time" content="2018-09-10T07:00:00.000Z">
<meta property="article:author" content="TinyChen">
<meta property="article:tag" content="hardware">
<meta property="article:tag" content="stu">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://resource.tinychen.com/20210617164850.jpg">
  
  
  <title>树莓派3B+打造多媒体中心 - TinyChen&#39;s Studio - 互联网技术学习工作经验分享</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hint.css@2/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/dracula.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->

  
<link rel="stylesheet" href="/css/fluid-extention.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"tinychen.com","root":"/","version":"1.8.14","typing":{"enable":true,"typeSpeed":30,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"baidu":"7a96963a1145ac7fde1442d739a11ffd","google":"UA-166769908-1","gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="TinyChen's Studio - 互联网技术学习工作经验分享" type="application/atom+xml">
</head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>TinyChen</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                Home
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                Archives
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                Categories
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                Tags
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                About
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('https://resource.tinychen.com/20210617164850.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="树莓派3B+打造多媒体中心">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2018-09-10 15:00" pubdate>
        September 10, 2018 pm
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      18k 字
    </span>
  

  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">树莓派3B+打造多媒体中心</h1>
            
              <p class="note note-info">
                
                  本文最后更新于：September 10, 2018 pm
                
              </p>
            
            <div class="markdown-body">
              <p>小七比较喜欢在宿舍和室友一起看电影或听音乐，且对画质和音质要求较高，一般都是观看1080P的蓝光REMUX电影（约30G一部）和听无损音质的音乐（30M一首），且观看设备较多（电视盒子、电脑、手机），再加上平时需要下载电影且自己有写博客的习惯，博客和一些其他的重要资料也需要备份，因此决定使用树莓派3B+、一块移动硬盘和一个路由器搭建一个宿舍多媒体中心来满足这些需求。</p>
<span id="more"></span>

<hr>
<h1 id="1、功能简介"><a href="#1、功能简介" class="headerlink" title="1、功能简介"></a>1、功能简介</h1><h2 id="1-1-Samba"><a href="#1-1-Samba" class="headerlink" title="1.1 Samba"></a>1.1 Samba</h2><p><strong>Samba是在Linux和UNIX系统上实现SMB协议的一个免费软件，由服务器及客户端程序构成。SMB（Server Messages Block，信息服务块）是一种在局域网上共享文件和打印机的一种通信协议，它为局域网内的不同计算机之间提供文件及打印机等资源的共享服务。</strong></p>
<p>换言之，使用Samba可以在局域网内实现文件的共享操作，有些放在移动硬盘里面的文件需要用的时候就不用再插移动硬盘，在网上邻居处拷贝即可。</p>
<h2 id="1-2-miniDLNA"><a href="#1-2-miniDLNA" class="headerlink" title="1.2 miniDLNA"></a>1.2 miniDLNA</h2><p><strong>DLNA的全称是DIGITAL LIVING NETWORK ALLIANCE(数字生活网络联盟)，DLNA并不是创造技术，而是形成一种解决的方案，一种大家可以遵守的规范。</strong></p>
<p>所以，其选择的各种技术和协议都是当前所应用很广泛的技术和协议。miniDLNA可以实现音乐视频图片的局域网跨设备共享，且目前大多数智能手机、平板和电视均支持DLNA协议，在树莓派上安装miniDLNA服务后即可让处在同一局域网下的设备能轻松访问到树莓派上的影音资源。</p>
<h2 id="1-3-下载机"><a href="#1-3-下载机" class="headerlink" title="1.3 下载机"></a>1.3 下载机</h2><p><strong>Transmission全称TransmissionBittorrent，由C开发而成（Mac OS上用的是Objective-C），硬件资源消耗极少，界面极度精简。</strong>支持包括Linux、BSD、Solaris、Mac OS X等多种操作系统，以及Networked Media Tank、WD MyBook、ReadyNAS、D-Link DNS-323 &amp; CH3SNAS、Synology等多种设备。支持GTK+、命令行、Web等多种界面。</p>
<p><strong>Aria2支持Http、FTP、磁力链接和BT下载，可以和Transimission互补。</strong></p>
<h2 id="1-4-自动备份"><a href="#1-4-自动备份" class="headerlink" title="1.4 自动备份"></a>1.4 自动备份</h2><p>数据备份是一个好习惯，但是总是会有遗忘或者是疏漏的情况出现，因此我们可以利用树莓派来实现自动备份。<strong>首先可以创建powershell命令实现备份功能，再另存为bat脚本文件，最后利用windows自带的定时任务功能和linux的定时执行命令操作来实现文件自动备份到树莓派上的操作。</strong></p>
<h2 id="1-5-状态监控"><a href="#1-5-状态监控" class="headerlink" title="1.5 状态监控"></a>1.5 状态监控</h2><p>作为长时间运行的多媒体中心，树莓派的运行状态不能忽视，因此我们可以<strong>使用LCD1602显示屏</strong>连接树莓派，显示一些必要的信息来监控它的运行状态。<strong>（CPU，GPU, RAM, IP, TIME）</strong></p>
<h1 id="2、安装操作"><a href="#2、安装操作" class="headerlink" title="2、安装操作"></a>2、安装操作</h1><h2 id="2-1-Samba"><a href="#2-1-Samba" class="headerlink" title="2.1 Samba"></a>2.1 Samba</h2><h3 id="2-1-1-安装ntfs-3g"><a href="#2-1-1-安装ntfs-3g" class="headerlink" title="2.1.1 安装ntfs-3g"></a>2.1.1 安装ntfs-3g</h3><p>树莓派接上移动硬盘后，会自动挂载到&#x2F;media目录下，但是由于我的硬盘是ntfs格式，在树莓系统下只能读不能写，因此我需要安装ntfs-3g服务实现对移动硬盘的写操作，然后再设置开机自动挂载移动硬盘。</p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">sudo apt-get install ntfs-3g<br><span class="hljs-comment">#安装ntfs -3g服务</span><br><br>sudo <span class="hljs-built_in">mkdir</span> /home/pi/share<br><span class="hljs-comment">#创建用于挂载移动硬盘的目录</span><br></code></pre></div></td></tr></table></figure>


<p><img src="https://resource.tinychen.com/image001.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">sudo umount /dev/sda1<br><span class="hljs-comment">#有些系统会自动挂载，因此先使用umont命令取消挂载移动硬盘</span><br><span class="hljs-comment">#后面的/dev/sda1是硬盘在此系统中对应的编号，可以使用 df -h命令查看，或者直接使用硬盘名代替</span><br><br>sudo mount -t ntfs-3g /dev/sda1 /home/pi/share<br><span class="hljs-comment">#使用ntfs -3g挂载硬盘到指定目录</span><br><br>sudo <span class="hljs-built_in">chmod</span> 777 /home/pi/share<br><span class="hljs-comment">#使用chmod命令赋予目录读写权限</span><br><br>sudo <span class="hljs-built_in">chmod</span> 777 /home/pi<br><span class="hljs-comment">#目录的上级目录也需要赋予读写权限</span><br></code></pre></div></td></tr></table></figure>


<p><img src="https://resource.tinychen.com/image002.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">sudo vim /etc/fstab<br><span class="hljs-comment">#编辑/etc/fstab文件实现开机自动挂载硬盘</span><br><br><span class="hljs-comment">#在文件的最后一行加入下列代码</span><br>/dev/sda1   /home/pi/share  ntfsdefaults0   0<br><span class="hljs-comment">#第一列是挂载的硬盘设备名或者uuid</span><br><span class="hljs-comment">#第二列是挂载的目录</span><br><span class="hljs-comment">#第三列是硬盘的文件系统类型</span><br><span class="hljs-comment">#第四列是文件系统的参数，defaults表示同时具有rw, suid, dev, exec, auto, nouser, async等默认参数的设置</span><br><span class="hljs-comment">#第五列是能否被dump备份命令作用：dump是一个用来作为备份的命令。通常这个参数的值为0或者1，0表示不备份</span><br><span class="hljs-comment">#第六列是是否检验扇区：开机的过程中，系统默认会以fsck检验我们系统是否为完整（clean）。0表示不要检验</span><br></code></pre></div></td></tr></table></figure>



<p><img src="https://resource.tinychen.com/image003.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="2-1-2安装Samba"><a href="#2-1-2安装Samba" class="headerlink" title="2.1.2安装Samba"></a>2.1.2安装Samba</h3><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">sudo apt-get update<br><span class="hljs-comment">#首先更新一下系统源</span><br><br>sudo apt-get install samba samba-common-bin<br><span class="hljs-comment">#安装samba-common版本</span><br><span class="hljs-comment">#samba-common：这个套件则主要提供了 SAMBA 的主要设定档(smb.conf) 、 smb.conf 语法检验的测试程序 ( testparm )等等；</span><br></code></pre></div></td></tr></table></figure>


<p><img src="https://resource.tinychen.com/image004.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">sudo vim /etc/samba/smb.conf<br><span class="hljs-comment">#编辑配置文件，在文件中加入下列内容</span><br></code></pre></div></td></tr></table></figure>


<p><img src="https://resource.tinychen.com/image005.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">security = share<br><span class="hljs-comment">#开放security权限等级为share</span><br><span class="hljs-comment">#share---不需要提供用户名和密码。</span><br><span class="hljs-comment">#user----需要提供用户名和密码，而且身份验证由 samba server 负责。</span><br><span class="hljs-comment">#server--需要提供用户名和密码，可指定其他机器(winNT/2000/XP)或另一台 samba server作身份验证。</span><br><span class="hljs-comment">#domain--需要提供用户名和密码，指定winNT/2000/XP域服务器作身份验证。</span><br><br>[share] <br><span class="hljs-comment">#share为开启共享后的文件夹名</span><br>comment = samba share   <br><span class="hljs-comment">#comment为备注，帮助理解这个共享文件夹</span><br>path = /home/pi/share   <br><span class="hljs-comment">#path为共享的文件目录路径</span><br>valid user = pi root   <br><span class="hljs-comment">#vaild users-----设定只有此名单内的用户才能访问共享资源(拒绝优先)(用户名/@组名)，这里设置为pi和root两个</span><br>public = <span class="hljs-built_in">yes</span><br><span class="hljs-comment">#public----------是yes/否no公开共享，若为否则进行身份验证(只有当security = share 时此项才起作用)</span><br>browseable = <span class="hljs-built_in">yes</span><br><span class="hljs-comment">#browseable------是yes/否no在浏览资源中显示共享目录，若为否则必须指定共享路径才能存取</span><br>writable = <span class="hljs-built_in">yes</span>  <br><span class="hljs-comment">#writable--------是yes/否no不以只读方式共享当与read only发生冲突时，无视read only</span><br></code></pre></div></td></tr></table></figure>


<p><img src="https://resource.tinychen.com/image006.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">sudo smbpasswd -a pi<br><span class="hljs-comment">#新建一个名为pi的用户，然后会提示输入两次密码</span><br><span class="hljs-comment">#smbpasswd命令的一些用法如下</span><br><span class="hljs-comment">#-a：向smbpasswd文件中添加用户；</span><br><span class="hljs-comment">#-c：指定samba的配置文件；</span><br><span class="hljs-comment">#-x：从smbpasswd文件中删除用户；</span><br><span class="hljs-comment">#-d：在smbpasswd文件中禁用指定的用户；</span><br><span class="hljs-comment">#-e：在smbpasswd文件中激活指定的用户；</span><br><span class="hljs-comment">#-n：将指定的用户的密码置空。</span><br><br><span class="hljs-comment">#设置完用户名和密码后输入下列命令激活用户</span><br>sudo smbpasswd -e pi<br></code></pre></div></td></tr></table></figure>


<p><img src="https://resource.tinychen.com/image007.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment">#然后重启samba服务即可生效</span><br>sudo /etc/init.d/samba restart<br></code></pre></div></td></tr></table></figure>


<p><img src="https://resource.tinychen.com/image008.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment">#最后还是要设置开机启动</span><br>sudo vim /etc/rc.local<br><br><span class="hljs-comment">#在下面添加如下代码</span><br>sudo /etc/init.d/samba restart<br></code></pre></div></td></tr></table></figure>


<p><img src="https://resource.tinychen.com/image009.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="2-1-3添加网络映射"><a href="#2-1-3添加网络映射" class="headerlink" title="2.1.3添加网络映射"></a>2.1.3添加网络映射</h3><p>添加网络映射主要是方便访问，可以将共享的samba文件夹添加到我的电脑中。首先右键我的电脑，点击添加网络映射&#x2F;Add a network location<br><img src="https://resource.tinychen.com/image010.png" srcset="/img/loading.gif" lazyload></p>
<p>输入共享的文件夹路径，然后命名，最后即可完成。<br><img src="https://resource.tinychen.com/image011.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://resource.tinychen.com/image012.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://resource.tinychen.com/image013.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="2-2-miniDLNA"><a href="#2-2-miniDLNA" class="headerlink" title="2.2 miniDLNA"></a>2.2 miniDLNA</h2><h3 id="2-2-1-安装miniDLNA"><a href="#2-2-1-安装miniDLNA" class="headerlink" title="2.2.1 安装miniDLNA"></a>2.2.1 安装miniDLNA</h3><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">sudo apt-get update<br><span class="hljs-comment">#先更新一下安装源</span><br><br>sudo apt-get install minidlna<br><span class="hljs-comment">#安装minidlna</span><br></code></pre></div></td></tr></table></figure>


<p><img src="https://resource.tinychen.com/image014.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment">#安装完后编辑配置文件</span><br>sudo vim /etc/minidlna.conf<br><br>media_dir=A,/home/pi/share/Music<br><span class="hljs-comment">#A表示这个目录是存放音乐的，当minidlna读到配置文件时，它会自动加载这个目录下的音乐文件 </span><br>media_dir=P,/home/pi/share/Picture  <br><span class="hljs-comment">#P表示图片文件  </span><br>media_dir=V,/home/pi/share/Video<br><span class="hljs-comment">#V表示视频文件</span><br>db_dir=/home/pi/share/dlnadb<br><span class="hljs-comment">#配置minidlna的数库数据的存放目录 </span><br>log_dir=/home/pi/share/dlnalog  <br><span class="hljs-comment">#配置日志目录 </span><br></code></pre></div></td></tr></table></figure>


<p><img src="https://resource.tinychen.com/image015.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment">#然后建立对应的文件夹并给予对应的权限</span><br>sudo <span class="hljs-built_in">mkdir</span> /home/pi/share/Music<br>sudo <span class="hljs-built_in">mkdir</span> /home/pi/share/Picture<br>sudo <span class="hljs-built_in">mkdir</span> /home/pi/share/Video<br>sudo <span class="hljs-built_in">mkdir</span> /home/pi/share/dlnadb<br>sudo <span class="hljs-built_in">mkdir</span> /home/pi/share/dlnalog<br><br>sudo <span class="hljs-built_in">chmod</span> 777 /home/pi/share/Music<br>sudo <span class="hljs-built_in">chmod</span> 777 /home/pi/share/Picture<br>sudo <span class="hljs-built_in">chmod</span> 777 /home/pi/share/Video<br>sudo <span class="hljs-built_in">chmod</span> 777 /home/pi/share/dlnadb<br>sudo <span class="hljs-built_in">chmod</span> 777 /home/pi/share/dlnalog<br><br><span class="hljs-comment">#使用下列命令重启dlna服务</span><br>sudo /etc/init.d/minidlna restart<br><br><span class="hljs-comment">#再使用下列命令查看dlna状态</span><br>sudo /etc/init.d/minidlna status<br></code></pre></div></td></tr></table></figure>


<p><img src="https://resource.tinychen.com/image016.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment">#最后修改开机启动文件</span><br>sudo vim /etc/rc.local<br><span class="hljs-comment">#在后面加入以下代码</span><br>sudo /etc/init.d/minidlna restart<br></code></pre></div></td></tr></table></figure>


<p><img src="https://resource.tinychen.com/image017.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="2-2-2-添加DLNA设备"><a href="#2-2-2-添加DLNA设备" class="headerlink" title="2.2.2 添加DLNA设备"></a>2.2.2 添加DLNA设备</h3><p>点击我的电脑左上方的流媒体</p>
<p><img src="https://resource.tinychen.com/image018.png" srcset="/img/loading.gif" lazyload></p>
<p>系统会自动搜索到局域网中的支持DLNA的设备，点击添加，等待添加完成。</p>
<p><img src="https://resource.tinychen.com/image019.png" srcset="/img/loading.gif" lazyload></p>
<p>打开支持DLNA或者是流媒体播放的软件，就能看到树莓派中的流媒体文件。</p>
<p><img src="https://resource.tinychen.com/image020.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="2-3-下载机"><a href="#2-3-下载机" class="headerlink" title="2.3 下载机"></a>2.3 下载机</h2><h3 id="2-3-1-安装transmission"><a href="#2-3-1-安装transmission" class="headerlink" title="2.3.1 安装transmission"></a>2.3.1 安装transmission</h3><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">sudo apt-get update<br><span class="hljs-comment">#先更新一下安装源</span><br>sudo apt-get install transmission-daemon<br><span class="hljs-comment">#然后安装transmission</span><br></code></pre></div></td></tr></table></figure>

<p><img src="https://resource.tinychen.com/image021.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment">#创建目录用于存放下载文件</span><br>sudo <span class="hljs-built_in">mkdir</span> /home/pi/share/Downloads/Incomplete  <br><span class="hljs-comment">#存放未下载完成的文件</span><br>sudo <span class="hljs-built_in">mkdir</span> /home/pi/share/Downloads/complete<br><span class="hljs-comment">#存放下载完成的文件</span><br><br><span class="hljs-comment">#更改文件所属组别</span><br>sudo <span class="hljs-built_in">chgrp</span> debian-transmission /home/pi/share/Downloads/Incomplete<br>sudo <span class="hljs-built_in">chgrp</span> debian-transmission /home/pi/share/Downloads/complete<br><br><span class="hljs-comment">#赋予文件夹权限</span><br>sudo <span class="hljs-built_in">chmod</span> 777 /home/pi/share/Downloads/Incomplete <br>sudo <span class="hljs-built_in">chmod</span> 777 /home/pi/share/Downloads/complete <br></code></pre></div></td></tr></table></figure>


<p><img src="https://resource.tinychen.com/image022.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment">#修改配置文件</span><br>sudo vim /etc/transmission-daemon/settings.json<br><br><span class="hljs-comment">#找到以下项进行修改</span><br><span class="hljs-comment">#已完成的下载目录</span><br><span class="hljs-string">&quot;download-dir&quot;</span>: <span class="hljs-string">&quot;/home/pi/share/Downloads/complete&quot;</span>,<br><span class="hljs-comment">#未完成的下载目录</span><br><span class="hljs-string">&quot;incomplete-dir&quot;</span>: <span class="hljs-string">&quot;/home/pi/share/Downloads/Incomplete&quot;</span>,<br><span class="hljs-comment">#允许Web访问的白名单地址,这里要根据自己的路由器实际IP地址进行修改</span><br><span class="hljs-string">&quot;rpc-whitelist&quot;</span>: <span class="hljs-string">&quot;192.168.8.*&quot;</span>,<br><span class="hljs-comment">#登录的用户名</span><br>“rpc-username”: “yourname”,<br><span class="hljs-comment">#登录的密码</span><br>“rpc-password”: “yoursecretcode”,<br><br><span class="hljs-comment">#最后依次执行下面的两条命令完成重启服务</span><br>sudo service transmission-daemon reload<br>sudo service transmission-daemon restart<br></code></pre></div></td></tr></table></figure>

<p>最后我们访问树莓派的IP再加上9091端口就能登录到下载界面。<br><img src="https://resource.tinychen.com/image023.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://resource.tinychen.com/image024.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://resource.tinychen.com/image025.png" srcset="/img/loading.gif" lazyload></p>
<h3 id="2-3-2-安装Aria2"><a href="#2-3-2-安装Aria2" class="headerlink" title="2.3.2 安装Aria2"></a>2.3.2 安装Aria2</h3><h4 id="2-3-2-1-安装Aria2"><a href="#2-3-2-1-安装Aria2" class="headerlink" title="2.3.2.1 安装Aria2"></a>2.3.2.1 安装Aria2</h4><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash">sudo apt-get update<br><span class="hljs-comment">#更新一下安装源</span><br>sudo apt-get install aria2<br><span class="hljs-comment">#安装aria2</span><br></code></pre></div></td></tr></table></figure>


<p><img src="https://resource.tinychen.com/image026.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment">#在/etc目录下创建aria2目录用来存放配置文件：</span><br>sudo <span class="hljs-built_in">mkdir</span> /etc/aria2<br><br><span class="hljs-comment">#创建空白的aria2.session文件：</span><br>sudo <span class="hljs-built_in">touch</span> /etc/aria2/aria2.session<br><br><span class="hljs-comment">#创建配置文件</span><br>sudo vim /etc/aria2/aria2.conf<br></code></pre></div></td></tr></table></figure>


<p><img src="https://resource.tinychen.com/image027.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment">#在该文件中输入以下内容：</span><br><br><span class="hljs-built_in">dir</span>=/home/pi/share/Downloads<br><span class="hljs-comment">#设置文件下载的存放目录 </span><br>disable-ipv6=<span class="hljs-literal">true</span> <br><span class="hljs-comment">#打开rpc的目的是为了给web管理端用 </span><br>enable-rpc=<span class="hljs-literal">true</span> <br>rpc-allow-origin-all=<span class="hljs-literal">true</span> <br>rpc-listen-all=<span class="hljs-literal">true</span> <br><span class="hljs-comment">#rpc-listen-port=6800 </span><br><span class="hljs-built_in">continue</span>=<span class="hljs-literal">true</span> <br>input-file=/etc/aria2/aria2.session <br>save-session=/etc/aria2/aria2.session <br>max-concurrent-downloads=3<br><span class="hljs-comment">#设置最大同时下载的任务数</span><br></code></pre></div></td></tr></table></figure>


<p><img src="https://resource.tinychen.com/image028.png" srcset="/img/loading.gif" lazyload></p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment">#启动aria2</span><br>sudo aria2c --conf-path=/etc/aria2/aria2.conf<br><br><span class="hljs-comment">#如果没有提示任何错误信息，那就按ctrl+c停止上面的语句，转为后台运行：</span><br><br>sudo aria2c --conf-path=/etc/aria2/aria2.conf －D<br><br><span class="hljs-comment">#同时其此句写到开机启动中，编辑/etc/rc.local</span><br>sudo vim /etc/rc.local<br><br><span class="hljs-comment">#在文件的最后面添加这一行</span><br>sudo aria2c --conf-path=/etc/aria2/aria2.conf －D<br></code></pre></div></td></tr></table></figure>


<p><img src="https://resource.tinychen.com/image029.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="2-3-2-2-安装appache"><a href="#2-3-2-2-安装appache" class="headerlink" title="2.3.2.2 安装appache"></a>2.3.2.2 安装appache</h4><figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment">#安装appach</span><br>sudo apt-get install apache2<br><br><span class="hljs-comment">#修改/var/www/html的权限</span><br><span class="hljs-built_in">chmod</span> 777 /var/www/html<br></code></pre></div></td></tr></table></figure>


<p><img src="https://resource.tinychen.com/image030.png" srcset="/img/loading.gif" lazyload></p>
<p><img src="https://resource.tinychen.com/image031.png" srcset="/img/loading.gif" lazyload></p>
<h4 id="2-3-2-3-安装yaaw"><a href="#2-3-2-3-安装yaaw" class="headerlink" title="2.3.2.3 安装yaaw"></a>2.3.2.3 安装yaaw</h4><p>从<a target="_blank" rel="noopener" href="https://github.com/binux/yaaw%E4%B8%8B%E8%BD%BDyaaw%EF%BC%8C%E7%82%B9%E5%87%BB%E5%8F%B3%E4%B8%8B%E8%A7%92%E7%9A%84Download">https://github.com/binux/yaaw下载yaaw，点击右下角的Download</a> Zip, 下载后将解压后的文件夹内容拷贝到&#x2F;var&#x2F;www&#x2F;html文件夹下。这时在浏览器内输入树莓派的IP，如果出现以下页面，则表示已经正常工作了。</p>
<p><strong>点击左上方的add就可以进行下载。</strong></p>
<p><img src="https://resource.tinychen.com/image032.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="2-4-自动备份"><a href="#2-4-自动备份" class="headerlink" title="2.4 自动备份"></a>2.4 自动备份</h2><h3 id="2-4-1-创建自动执行文件"><a href="#2-4-1-创建自动执行文件" class="headerlink" title="2.4.1 创建自动执行文件"></a>2.4.1 创建自动执行文件</h3><p>使用记事本新建一个文件，里面输入下列代码，然后保存并更改文件名后缀为bat执行文件。</p>
<figure class="highlight bat"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bat">@<span class="hljs-built_in">echo</span> off<br><span class="hljs-built_in">echo</span> Backuping D:\MyBlog\source\_posts---------&gt;<span class="hljs-number">192</span>.<span class="hljs-number">168</span>.<span class="hljs-number">8</span>.<span class="hljs-number">106</span>\share\Backup<br><span class="hljs-built_in">xcopy</span> &quot;D:\MyBlog\source\_posts&quot; &quot;\\RASPBERRYPI\share\Backup&quot; /e/I/d/h/r/y<br><span class="hljs-keyword">exit</span><br></code></pre></div></td></tr></table></figure>

<p>其中xcopy指令后两个路径分别为需要备份的文件夹路径和用于存放备份的文件夹路径，其余参数说明如下：</p>
<p><strong>&#x2F;e：拷贝所有子目录，包括空子目录；</strong></p>
<p><strong>&#x2F;I： 如果目标文件或目录不存在且拷贝的文件数多于一，则假设目标为目录；</strong></p>
<p><strong>&#x2F;d：只拷贝文件日期与在目标文件后的文件（即修改过的源文件）</strong></p>
<p><strong>&#x2F;h：同时拷贝隐藏文件和系统文件</strong></p>
<p><strong>&#x2F;r：拷贝并覆盖只读文件</strong></p>
<p><strong>&#x2F;y： 复制文件审核设置（不显示已有文件覆盖确认）</strong></p>
<p>以上参数可以根据需要添加，推荐都加上最好。</p>
<h3 id="2-4-2-设置定时任务"><a href="#2-4-2-设置定时任务" class="headerlink" title="2.4.2 设置定时任务"></a>2.4.2 设置定时任务</h3><p><strong>然后我们打开”控制面板”—“计划任务”添加计划任务，计划任务里的执行目标为该批处理文件，设定在什么时候执行则由个人决定。</strong></p>
<p>执行效果示例如下：</p>
<p><img src="https://resource.tinychen.com/image033.png" srcset="/img/loading.gif" lazyload></p>
<h2 id="2-5-状态监控"><a href="#2-5-状态监控" class="headerlink" title="2.5 状态监控"></a>2.5 状态监控</h2><p>按照针脚跳线连接好LCD1602和树莓派并调节好LCD1602的对比度，使用python编写代码，控制1602输出相关信息，具体代码如下：</p>
<p><strong>将下面这个文件保存为lcd1602.py</strong></p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/python</span><br> <br><span class="hljs-comment">#</span><br><span class="hljs-comment"># based on code from lrvick and LiquidCrystal</span><br><span class="hljs-comment"># lrvic - https://github.com/lrvick/raspi-hd44780/blob/master/hd44780.py</span><br><span class="hljs-comment"># LiquidCrystal - https://github.com/arduino/Arduino/blob/master/libraries/LiquidCrystal/LiquidCrystal.cpp</span><br><span class="hljs-comment">#</span><br> <br><span class="hljs-keyword">from</span> time <span class="hljs-keyword">import</span> sleep<br> <br><span class="hljs-keyword">class</span> <span class="hljs-title class_">lcd1602</span>:<br> <br><span class="hljs-comment"># commands</span><br>LCD_CLEARDISPLAY= <span class="hljs-number">0x01</span><br>LCD_RETURNHOME  = <span class="hljs-number">0x02</span><br>LCD_ENTRYMODESET= <span class="hljs-number">0x04</span><br>LCD_DISPLAYCONTROL  = <span class="hljs-number">0x08</span><br>LCD_CURSORSHIFT = <span class="hljs-number">0x10</span><br>LCD_FUNCTIONSET = <span class="hljs-number">0x20</span><br>LCD_SETCGRAMADDR= <span class="hljs-number">0x40</span><br>LCD_SETDDRAMADDR= <span class="hljs-number">0x80</span><br> <br><span class="hljs-comment"># flags for display entry mode</span><br>LCD_ENTRYRIGHT  = <span class="hljs-number">0x00</span><br>LCD_ENTRYLEFT   = <span class="hljs-number">0x02</span><br>LCD_ENTRYSHIFTINCREMENT = <span class="hljs-number">0x01</span><br>LCD_ENTRYSHIFTDECREMENT = <span class="hljs-number">0x00</span><br> <br><span class="hljs-comment"># flags for display on/off control</span><br>LCD_DISPLAYON   = <span class="hljs-number">0x04</span><br>LCD_DISPLAYOFF  = <span class="hljs-number">0x00</span><br>LCD_CURSORON= <span class="hljs-number">0x02</span><br>LCD_CURSOROFF   = <span class="hljs-number">0x00</span><br>LCD_BLINKON = <span class="hljs-number">0x01</span><br>LCD_BLINKOFF= <span class="hljs-number">0x00</span><br> <br><span class="hljs-comment"># flags for display/cursor shift</span><br>LCD_DISPLAYMOVE = <span class="hljs-number">0x08</span><br>LCD_CURSORMOVE  = <span class="hljs-number">0x00</span><br> <br><span class="hljs-comment"># flags for display/cursor shift</span><br>LCD_DISPLAYMOVE = <span class="hljs-number">0x08</span><br>LCD_CURSORMOVE  = <span class="hljs-number">0x00</span><br>LCD_MOVERIGHT   = <span class="hljs-number">0x04</span><br>LCD_MOVELEFT= <span class="hljs-number">0x00</span><br> <br><span class="hljs-comment"># flags for function set</span><br>LCD_8BITMODE= <span class="hljs-number">0x10</span><br>LCD_4BITMODE= <span class="hljs-number">0x00</span><br>LCD_2LINE   = <span class="hljs-number">0x08</span><br>LCD_1LINE   = <span class="hljs-number">0x00</span><br>LCD_5x10DOTS= <span class="hljs-number">0x04</span><br>LCD_5x8DOTS = <span class="hljs-number">0x00</span><br></code></pre></div></td></tr></table></figure>


<p>​<br>​     </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, pin_rs=<span class="hljs-number">14</span>, pin_e=<span class="hljs-number">15</span>, pins_db=[<span class="hljs-number">17</span>, <span class="hljs-number">18</span>, <span class="hljs-number">27</span>, <span class="hljs-number">22</span>], GPIO = <span class="hljs-literal">None</span></span>):<br><span class="hljs-comment"># Emulate the old behavior of using RPi.GPIO if we haven&#x27;t been given</span><br><span class="hljs-comment"># an explicit GPIO interface to use</span><br><span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> GPIO:<br><span class="hljs-keyword">import</span> RPi.GPIO <span class="hljs-keyword">as</span> GPIO<br>self.GPIO = GPIO<br>self.pin_rs = pin_rs<br>self.pin_e = pin_e<br>self.pins_db = pins_db<br> <br>self.GPIO.setmode(GPIO.BCM)<br>self.GPIO.setwarnings(<span class="hljs-literal">False</span>)<br>self.GPIO.setup(self.pin_e, GPIO.OUT)<br>self.GPIO.setup(self.pin_rs, GPIO.OUT)<br> <br><span class="hljs-keyword">for</span> pin <span class="hljs-keyword">in</span> self.pins_db:<br>self.GPIO.setup(pin, GPIO.OUT)<br> <br>self.write4bits(<span class="hljs-number">0x33</span>) <span class="hljs-comment"># initialization</span><br>self.write4bits(<span class="hljs-number">0x32</span>) <span class="hljs-comment"># initialization</span><br>self.write4bits(<span class="hljs-number">0x28</span>) <span class="hljs-comment"># 2 line 5x7 matrix</span><br>self.write4bits(<span class="hljs-number">0x0C</span>) <span class="hljs-comment"># turn cursor off 0x0E to enable cursor</span><br>self.write4bits(<span class="hljs-number">0x06</span>) <span class="hljs-comment"># shift cursor right</span><br> <br>self.displaycontrol = self.LCD_DISPLAYON | self.LCD_CURSOROFF | self.LCD_BLINKOFF<br> <br>self.displayfunction = self.LCD_4BITMODE | self.LCD_1LINE | self.LCD_5x8DOTS<br>self.displayfunction |= self.LCD_2LINE<br> <br><span class="hljs-string">&quot;&quot;&quot; Initialize to default text direction (for romance languages) &quot;&quot;&quot;</span><br>self.displaymode =  self.LCD_ENTRYLEFT | self.LCD_ENTRYSHIFTDECREMENT<br>self.write4bits(self.LCD_ENTRYMODESET | self.displaymode) <span class="hljs-comment">#  set the entry mode</span><br> <br>self.clear()<br></code></pre></div></td></tr></table></figure>


<p>​     </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">begin</span>(<span class="hljs-params">self, cols, lines</span>):<br> <br><span class="hljs-keyword">if</span> (lines &gt; <span class="hljs-number">1</span>):<br>self.numlines = lines<br>self.displayfunction |= self.LCD_2LINE<br>self.currline = <span class="hljs-number">0</span><br></code></pre></div></td></tr></table></figure>


<p>​     </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">home</span>(<span class="hljs-params">self</span>):<br> <br>self.write4bits(self.LCD_RETURNHOME) <span class="hljs-comment"># set cursor position to zero</span><br>self.delayMicroseconds(<span class="hljs-number">3000</span>) <span class="hljs-comment"># this command takes a long time!</span><br></code></pre></div></td></tr></table></figure>


<p>​     </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">clear</span>(<span class="hljs-params">self</span>):<br> <br>self.write4bits(self.LCD_CLEARDISPLAY) <span class="hljs-comment"># command to clear display</span><br>self.delayMicroseconds(<span class="hljs-number">3000</span>)<span class="hljs-comment"># 3000 microsecond sleep, clearing the display takes a long time</span><br></code></pre></div></td></tr></table></figure>


<p>​     </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">setCursor</span>(<span class="hljs-params">self, col, row</span>):<br> <br>self.row_offsets = [ <span class="hljs-number">0x00</span>, <span class="hljs-number">0x40</span>, <span class="hljs-number">0x14</span>, <span class="hljs-number">0x54</span> ]<br> <br><span class="hljs-keyword">if</span> ( row &gt; self.numlines ): <br>row = self.numlines - <span class="hljs-number">1</span> <span class="hljs-comment"># we count rows starting w/0</span><br> <br>self.write4bits(self.LCD_SETDDRAMADDR | (col + self.row_offsets[row]))<br></code></pre></div></td></tr></table></figure>


<p>​     </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">noDisplay</span>(<span class="hljs-params">self</span>): <br><span class="hljs-string">&quot;&quot;&quot; Turn the display off (quickly) &quot;&quot;&quot;</span><br> <br>self.displaycontrol &amp;= ~self.LCD_DISPLAYON<br>self.write4bits(self.LCD_DISPLAYCONTROL | self.displaycontrol)<br></code></pre></div></td></tr></table></figure>


<p>​     </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">display</span>(<span class="hljs-params">self</span>):<br><span class="hljs-string">&quot;&quot;&quot; Turn the display on (quickly) &quot;&quot;&quot;</span><br> <br>self.displaycontrol |= self.LCD_DISPLAYON<br>self.write4bits(self.LCD_DISPLAYCONTROL | self.displaycontrol)<br></code></pre></div></td></tr></table></figure>


<p>​     </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">noCursor</span>(<span class="hljs-params">self</span>):<br><span class="hljs-string">&quot;&quot;&quot; Turns the underline cursor on/off &quot;&quot;&quot;</span><br> <br>self.displaycontrol &amp;= ~self.LCD_CURSORON<br>self.write4bits(self.LCD_DISPLAYCONTROL | self.displaycontrol)<br></code></pre></div></td></tr></table></figure>


<p>​     </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">cursor</span>(<span class="hljs-params">self</span>):<br><span class="hljs-string">&quot;&quot;&quot; Cursor On &quot;&quot;&quot;</span><br> <br>self.displaycontrol |= self.LCD_CURSORON<br>self.write4bits(self.LCD_DISPLAYCONTROL | self.displaycontrol)<br></code></pre></div></td></tr></table></figure>


<p>​     </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">noBlink</span>(<span class="hljs-params">self</span>):<br><span class="hljs-string">&quot;&quot;&quot; Turn on and off the blinking cursor &quot;&quot;&quot;</span><br> <br>self.displaycontrol &amp;= ~self.LCD_BLINKON<br>self.write4bits(self.LCD_DISPLAYCONTROL | self.displaycontrol)<br></code></pre></div></td></tr></table></figure>


<p>​     </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">noBlink</span>(<span class="hljs-params">self</span>):<br><span class="hljs-string">&quot;&quot;&quot; Turn on and off the blinking cursor &quot;&quot;&quot;</span><br> <br>self.displaycontrol &amp;= ~self.LCD_BLINKON<br>self.write4bits(self.LCD_DISPLAYCONTROL | self.displaycontrol)<br></code></pre></div></td></tr></table></figure>


<p>​     </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">DisplayLeft</span>(<span class="hljs-params">self</span>):<br><span class="hljs-string">&quot;&quot;&quot; These commands scroll the display without changing the RAM &quot;&quot;&quot;</span><br> <br>self.write4bits(self.LCD_CURSORSHIFT | self.LCD_DISPLAYMOVE | self.LCD_MOVELEFT)<br></code></pre></div></td></tr></table></figure>


<p>​     </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">scrollDisplayRight</span>(<span class="hljs-params">self</span>):<br><span class="hljs-string">&quot;&quot;&quot; These commands scroll the display without changing the RAM &quot;&quot;&quot;</span><br> <br>self.write4bits(self.LCD_CURSORSHIFT | self.LCD_DISPLAYMOVE | self.LCD_MOVERIGHT);<br></code></pre></div></td></tr></table></figure>


<p>​     </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">leftToRight</span>(<span class="hljs-params">self</span>):<br><span class="hljs-string">&quot;&quot;&quot; This is for text that flows Left to Right &quot;&quot;&quot;</span><br> <br>self.displaymode |= self.LCD_ENTRYLEFT<br>self.write4bits(self.LCD_ENTRYMODESET | self.displaymode);<br></code></pre></div></td></tr></table></figure>


<p>​     </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">rightToLeft</span>(<span class="hljs-params">self</span>):<br><span class="hljs-string">&quot;&quot;&quot; This is for text that flows Right to Left &quot;&quot;&quot;</span><br>self.displaymode &amp;= ~self.LCD_ENTRYLEFT<br>self.write4bits(self.LCD_ENTRYMODESET | self.displaymode)<br></code></pre></div></td></tr></table></figure>


<p>​     </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">autoscroll</span>(<span class="hljs-params">self</span>):<br><span class="hljs-string">&quot;&quot;&quot; This will &#x27;right justify&#x27; text from the cursor &quot;&quot;&quot;</span><br> <br>self.displaymode |= self.LCD_ENTRYSHIFTINCREMENT<br>self.write4bits(self.LCD_ENTRYMODESET | self.displaymode)<br></code></pre></div></td></tr></table></figure>


<p>​     </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">noAutoscroll</span>(<span class="hljs-params">self</span>): <br><span class="hljs-string">&quot;&quot;&quot; This will &#x27;left justify&#x27; text from the cursor &quot;&quot;&quot;</span><br> <br>self.displaymode &amp;= ~self.LCD_ENTRYSHIFTINCREMENT<br>self.write4bits(self.LCD_ENTRYMODESET | self.displaymode)<br></code></pre></div></td></tr></table></figure>


<p>​     </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">write4bits</span>(<span class="hljs-params">self, bits, char_mode=<span class="hljs-literal">False</span></span>):<br><span class="hljs-string">&quot;&quot;&quot; Send command to LCD &quot;&quot;&quot;</span><br> <br>self.delayMicroseconds(<span class="hljs-number">1000</span>) <span class="hljs-comment"># 1000 microsecond sleep</span><br> <br>bits=<span class="hljs-built_in">bin</span>(bits)[<span class="hljs-number">2</span>:].zfill(<span class="hljs-number">8</span>)<br> <br>self.GPIO.output(self.pin_rs, char_mode)<br> <br><span class="hljs-keyword">for</span> pin <span class="hljs-keyword">in</span> self.pins_db:<br>self.GPIO.output(pin, <span class="hljs-literal">False</span>)<br> <br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">4</span>):<br><span class="hljs-keyword">if</span> bits[i] == <span class="hljs-string">&quot;1&quot;</span>:<br>self.GPIO.output(self.pins_db[::-<span class="hljs-number">1</span>][i], <span class="hljs-literal">True</span>)<br> <br>self.pulseEnable()<br> <br><span class="hljs-keyword">for</span> pin <span class="hljs-keyword">in</span> self.pins_db:<br>self.GPIO.output(pin, <span class="hljs-literal">False</span>)<br> <br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">4</span>,<span class="hljs-number">8</span>):<br><span class="hljs-keyword">if</span> bits[i] == <span class="hljs-string">&quot;1&quot;</span>:<br>self.GPIO.output(self.pins_db[::-<span class="hljs-number">1</span>][i-<span class="hljs-number">4</span>], <span class="hljs-literal">True</span>)<br> <br>self.pulseEnable()<br></code></pre></div></td></tr></table></figure>


<p>​     </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">delayMicroseconds</span>(<span class="hljs-params">self, microseconds</span>):<br>seconds = microseconds / <span class="hljs-built_in">float</span>(<span class="hljs-number">1000000</span>) <span class="hljs-comment"># divide microseconds by 1 million for seconds</span><br>sleep(seconds)<br></code></pre></div></td></tr></table></figure>


<p>​     </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">pulseEnable</span>(<span class="hljs-params">self</span>):<br>self.GPIO.output(self.pin_e, <span class="hljs-literal">False</span>)<br>self.delayMicroseconds(<span class="hljs-number">1</span>)   <span class="hljs-comment"># 1 microsecond pause - enable pulse must be &gt; 450ns </span><br>self.GPIO.output(self.pin_e, <span class="hljs-literal">True</span>)<br>self.delayMicroseconds(<span class="hljs-number">1</span>)   <span class="hljs-comment"># 1 microsecond pause - enable pulse must be &gt; 450ns </span><br>self.GPIO.output(self.pin_e, <span class="hljs-literal">False</span>)<br>self.delayMicroseconds(<span class="hljs-number">1</span>)   <span class="hljs-comment"># commands need &gt; 37us to settle</span><br></code></pre></div></td></tr></table></figure>


<p>​     </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">message</span>(<span class="hljs-params">self, text</span>):<br><span class="hljs-string">&quot;&quot;&quot; Send string to LCD、Newline wraps to second line&quot;&quot;&quot;</span><br> <br><span class="hljs-keyword">for</span> char <span class="hljs-keyword">in</span> text:<br><span class="hljs-keyword">if</span> char == <span class="hljs-string">&#x27;\n&#x27;</span>:<br>self.write4bits(<span class="hljs-number">0xC0</span>) <span class="hljs-comment"># next line</span><br><span class="hljs-keyword">else</span>:<br>self.write4bits(<span class="hljs-built_in">ord</span>(char),<span class="hljs-literal">True</span>)<br></code></pre></div></td></tr></table></figure>


<p>​     </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br> <br>lcd = lcd1602()<br>lcd.clear()<br>lcd.message(<span class="hljs-string">&quot;hello world!&quot;</span>)<br></code></pre></div></td></tr></table></figure>


<p><strong>再将这个文件保存为1602.py</strong></p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment">#!/usr/bin/python</span><br> <br><span class="hljs-keyword">from</span> lcd1602 <span class="hljs-keyword">import</span> *<br><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> *<br><span class="hljs-keyword">import</span> commands<br> <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_cpu_temp</span>():<br>tmp = <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;/sys/class/thermal/thermal_zone0/temp&#x27;</span>)<br>cpu = tmp.read()<br>tmp.close()<br><span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&#123;:.2f&#125;&#x27;</span>.<span class="hljs-built_in">format</span>( <span class="hljs-built_in">float</span>(cpu)/<span class="hljs-number">1000</span> ) + <span class="hljs-string">&#x27; C&#x27;</span><br> <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_gpu_temp</span>():<br>tmp = commands.getoutput(<span class="hljs-string">&#x27;vcgencmd measure_temp|awk -F= \&#x27;&#123;print $2&#125;\&#x27;&#x27;</span>).replace(<span class="hljs-string">&#x27;\&#x27;C&#x27;</span>,<span class="hljs-string">&#x27;&#x27;</span>)<br>gpu = <span class="hljs-built_in">float</span>(tmp)<br><span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;&#123;:.2f&#125;&#x27;</span>.<span class="hljs-built_in">format</span>( gpu ) + <span class="hljs-string">&#x27; C&#x27;</span><br> <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_time_now</span>():<br><span class="hljs-keyword">return</span> datetime.now().strftime(<span class="hljs-string">&#x27;%H:%M:%S\n   %Y-%m-%d&#x27;</span>)<br> <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_ip_info</span>():<br>ip= commands.getoutput(<span class="hljs-string">&#x27;ifconfig eth0 | grep inet | awk \&#x27;&#123; print $2 &#125;\&#x27; | awk \&#x27;NR==1\&#x27;&#x27;</span>)<br><span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;Ethernet IP:\n&#x27;</span> + ip <br> <br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_mem_info</span>():<br>total= commands.getoutput(<span class="hljs-string">&#x27;free -m|grep Mem:|awk \&#x27;&#123;print $2&#125;\&#x27;&#x27;</span>)  <br>free= commands.getoutput(<span class="hljs-string">&#x27;free -m|grep Mem:|awk \&#x27;&#123;print $4&#125;\&#x27;&#x27;</span>)<br><span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;MEM:\n&#x27;</span> + free +<span class="hljs-string">&#x27;/&#x27;</span>+ total +<span class="hljs-string">&#x27;M&#x27;</span><br> <br>lcd = lcd1602()<br>lcd.clear()<br> <br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br> <br><span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>):<br>lcd.clear()<br>lcd.message( get_ip_info() )<br>sleep(<span class="hljs-number">5</span>)<br> <br>lcd.clear()<br>lcd.message( get_time_now() )<br>sleep(<span class="hljs-number">5</span>)<br> <br>lcd.clear()<br>lcd.message( get_mem_info() )<br>sleep(<span class="hljs-number">5</span>)<br> <br>lcd.clear()<br>lcd.message( <span class="hljs-string">&#x27;CPU: &#x27;</span> + get_cpu_temp()+<span class="hljs-string">&#x27;\n&#x27;</span> )<br>lcd.message( <span class="hljs-string">&#x27;GPU: &#x27;</span> + get_gpu_temp() )<br>sleep(<span class="hljs-number">5</span>)<br></code></pre></div></td></tr></table></figure>


<p><strong>最后将两个文件保存到同一个目录下面，然后编辑文件设置开机启动即可让LCD1602循环显示信息。</strong></p>
<p><strong>我将这两个文件保存到&#x2F;home&#x2F;pi&#x2F;1602目录下</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs bash"><span class="hljs-comment">#编辑配置文件</span><br>sudo vim /etc/rc.local<br><span class="hljs-comment">#将此命令添加到文件最后</span><br>sudo python /home/pi/1602/1602.py<br></code></pre></div></td></tr></table></figure>


<p><img src="https://resource.tinychen.com/image034.png" srcset="/img/loading.gif" lazyload></p>
<h1 id="3、爬虫服务器"><a href="#3、爬虫服务器" class="headerlink" title="3、爬虫服务器"></a>3、爬虫服务器</h1><h2 id="3-1-Python源码示例"><a href="#3-1-Python源码示例" class="headerlink" title="3.1 Python源码示例"></a>3.1 Python源码示例</h2><figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment">#encoding=&#x27;UTF-8&#x27;</span><br><span class="hljs-keyword">from</span> urllib <span class="hljs-keyword">import</span> request<br><span class="hljs-keyword">import</span> json<br><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> datetime<br><span class="hljs-keyword">from</span> datetime <span class="hljs-keyword">import</span> timedelta<br><span class="hljs-keyword">import</span> pandas <span class="hljs-keyword">as</span> pd<br><span class="hljs-keyword">from</span> lxml <span class="hljs-keyword">import</span> etree<br><span class="hljs-keyword">from</span> tqdm <span class="hljs-keyword">import</span> tqdm<br><span class="hljs-keyword">import</span> random<br><span class="hljs-keyword">import</span> re<br><span class="hljs-keyword">import</span> csv<br></code></pre></div></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-comment"># 获取数据，根据url获取</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_data</span>(<span class="hljs-params">url</span>):<br>headers = &#123;<br><span class="hljs-string">&#x27;User-Agent&#x27;</span>: <span class="hljs-string">&#x27;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/64.0.3282.140 Safari/537.36&#x27;</span><br>&#125;<br>req = request.Request(url, headers=headers)<br>response = request.urlopen(req)<br><span class="hljs-keyword">if</span> response.getcode() == <span class="hljs-number">200</span>:<br><span class="hljs-keyword">return</span> response.read()<br><span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br><br><span class="hljs-comment"># 处理数据</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">parse_data</span>(<span class="hljs-params">html</span>):<br>data = json.loads(html)[<span class="hljs-string">&#x27;cmts&#x27;</span>]  <span class="hljs-comment"># 将str转换为json</span><br>comments = []<br><span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> data:<br>comment = &#123;<br><span class="hljs-string">&#x27;id&#x27;</span>: item[<span class="hljs-string">&#x27;id&#x27;</span>],<br><span class="hljs-comment">#&#x27;nickName&#x27;: item[&#x27;nickName&#x27;],</span><br><span class="hljs-string">&#x27;cityName&#x27;</span>: item[<span class="hljs-string">&#x27;cityName&#x27;</span>] <span class="hljs-keyword">if</span> <span class="hljs-string">&#x27;cityName&#x27;</span> <span class="hljs-keyword">in</span> item <span class="hljs-keyword">else</span> <span class="hljs-string">&#x27;&#x27;</span>,  <span class="hljs-comment"># 处理cityName不存在的情况</span><br><span class="hljs-comment"># 处理评论内容换行的情况,并且将逗号替换为空格</span><br><span class="hljs-string">&#x27;content&#x27;</span>: item[<span class="hljs-string">&#x27;content&#x27;</span>].replace(<span class="hljs-string">&#x27;”&#x27;</span>,<span class="hljs-string">&#x27; &#x27;</span>).replace(<span class="hljs-string">&#x27;“&#x27;</span>,<span class="hljs-string">&#x27; &#x27;</span>).replace(<span class="hljs-string">&#x27;,&#x27;</span>,<span class="hljs-string">&#x27; &#x27;</span>).replace(<span class="hljs-string">&#x27;，&#x27;</span>,<span class="hljs-string">&#x27; &#x27;</span>).replace(<span class="hljs-string">&#x27;\n&#x27;</span>, <span class="hljs-string">&#x27; &#x27;</span>),  <br><span class="hljs-string">&#x27;score&#x27;</span>: item[<span class="hljs-string">&#x27;score&#x27;</span>],<br><span class="hljs-string">&#x27;startTime&#x27;</span>: item[<span class="hljs-string">&#x27;startTime&#x27;</span>]<br>&#125;<br>comments.append(comment)<br><span class="hljs-keyword">return</span> comments<br><br><span class="hljs-comment"># 存储数据，存储到文本文件</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">savetoCSV</span>():<br><span class="hljs-comment">#设置指定时间向前爬取评论数据或者从特定的时间段爬取评论</span><br><span class="hljs-comment">#start_time = &#x27;2015-05-12 02:40:34&#x27;</span><br>start_time = datetime.now().strftime(<span class="hljs-string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)  <span class="hljs-comment"># 获取当前时间，从当前时间向前获取</span><br><span class="hljs-comment">#设置爬取评论数据的截至时间</span><br>end_time = <span class="hljs-string">&#x27;2015-05-01 00:00:00&#x27;</span><br><span class="hljs-keyword">while</span> start_time &gt; end_time:<br>url = <span class="hljs-string">&#x27;http://m.maoyan.com/mmdb/comments/movie/248170.json?_v_=yes&amp;offset=0&amp;startTime=&#x27;</span> + start_time.replace(<span class="hljs-string">&#x27; &#x27;</span>, <span class="hljs-string">&#x27;%20&#x27;</span>)<br>html = <span class="hljs-literal">None</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">问题：当请求过于频繁时，服务器会拒绝连接，实际上是服务器的反爬虫策略</span><br><span class="hljs-string">解决：1.在每个请求间增加延时0.1秒，尽量减少请求被拒绝</span><br><span class="hljs-string"> 2.如果被拒绝，则0.5秒后重试</span><br><span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-keyword">try</span>:<br>html = get_data(url)<br><span class="hljs-keyword">except</span> Exception <span class="hljs-keyword">as</span> e:<br>time.sleep(<span class="hljs-number">0.5</span>)<br>html = get_data(url)<br><span class="hljs-keyword">else</span>:<br>time.sleep(<span class="hljs-number">0.1</span>)<br><br>comments = parse_data(html)<br><span class="hljs-built_in">print</span>(comments)<br>start_time = comments[<span class="hljs-number">14</span>][<span class="hljs-string">&#x27;startTime&#x27;</span>]  <span class="hljs-comment"># 获得末尾评论的时间</span><br>start_time = datetime.strptime(start_time, <span class="hljs-string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>) + timedelta(seconds=-<span class="hljs-number">1</span>)  <span class="hljs-comment"># 转换为datetime类型，减1秒，避免获取到重复数据</span><br>start_time = datetime.strftime(start_time, <span class="hljs-string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>)  <span class="hljs-comment"># 转换为str</span><br></code></pre></div></td></tr></table></figure>


<p>​    </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">for</span> item <span class="hljs-keyword">in</span> comments:<br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;test3.csv&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>f.write(<span class="hljs-built_in">str</span>(item[<span class="hljs-string">&#x27;id&#x27;</span>]) + <span class="hljs-string">&#x27;,&#x27;</span> + item[<span class="hljs-string">&#x27;startTime&#x27;</span>].strip(<span class="hljs-string">&#x27;[\&#x27;&#x27;</span>).split(<span class="hljs-string">&#x27; &#x27;</span>)[<span class="hljs-number">0</span>] + <span class="hljs-string">&#x27;,&#x27;</span> + <span class="hljs-built_in">str</span>(item[<span class="hljs-string">&#x27;score&#x27;</span>]) + <span class="hljs-string">&#x27;,&#x27;</span> + item[<span class="hljs-string">&#x27;cityName&#x27;</span>] + <span class="hljs-string">&#x27;,&#x27;</span> + <span class="hljs-built_in">str</span>(item[<span class="hljs-string">&#x27;content&#x27;</span>]) + <span class="hljs-string">&#x27;\n&#x27;</span>)<br><span class="hljs-comment">#f.write(str(item[&#x27;id&#x27;])+&#x27;,&#x27;+item[&#x27;nickName&#x27;] + &#x27;,&#x27; + item[&#x27;cityName&#x27;] + &#x27;,&#x27; + item[&#x27;content&#x27;] + &#x27;,&#x27; + str(item[&#x27;score&#x27;])+ &#x27;,&#x27; + item[&#x27;startTime&#x27;] + &#x27;\n&#x27;)</span><br></code></pre></div></td></tr></table></figure>


<p>​<br>​    </p>
<figure class="highlight python"><table><tr><td class="gutter hljs"><div class="hljs code-wrapper"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></div></td><td class="code"><div class="hljs code-wrapper"><pre><code class="hljs python"><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>html = get_data(<span class="hljs-string">&#x27;http://m.maoyan.com/mmdb/comments/movie/248170.json?_v_=yes&amp;offset=0&amp;startTime=2018-12-31%2022%3A25%3A03&#x27;</span>)<br>comments = parse_data(html)<br><span class="hljs-built_in">print</span>(comments)<br>savetoCSV()<br></code></pre></div></td></tr></table></figure>

<h2 id="3-2-效果展示"><a href="#3-2-效果展示" class="headerlink" title="3.2 效果展示"></a>3.2 效果展示</h2><p><img src="https://resource.tinychen.com/raspi%E6%9C%AA%E5%91%BD%E5%90%8D1546430991.png" srcset="/img/loading.gif" lazyload></p>
<h1 id="4、写在最后"><a href="#4、写在最后" class="headerlink" title="4、写在最后"></a>4、写在最后</h1><p><strong>重启之后就可以尽情地享用树莓派打造的多媒体中心了，虽然树莓派3B+只有USB2.0接口，但是只要搭配上百兆lan口的路由器，局域网内流畅观看40G左右大小的一部电影还是毫无问题的。</strong></p>
<p>如果有更高的需求，还是建议上更好的路由器和NAS吧。</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/linux/">linux</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/hardware/">hardware</a>
                    
                      <a class="hover-with-bg" href="/tags/stu/">stu</a>
                    
                  </div>
                
              </div>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/20181109-ubuntu-change-time/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Ubuntu18.04与Win10时间不一致</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/20180824-androidstudio-install/">
                        <span class="hidden-mobile">Android Studio配置</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;TOC</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <i class="iconfont icon-copyright"></i> <a href="https://tinychen.com/" target="_blank" rel="nofollow noopener"><span>Since 2017 By TinyChen </span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Hexo-Fluid</span></a> 
  </div>
  

  
  <!-- 备案信息 -->
  <div class="beian">
    <span>
      <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
        粤ICP备18140640号
      </a>
    </span>
    
  </div>


  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
        typing(title);
      
    })(window, document);
  </script>












  
    <!-- Baidu Analytics -->
    <script defer>
      var _hmt = _hmt || [];
      (function () {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?7a96963a1145ac7fde1442d739a11ffd";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
  

  
    <!-- Google Analytics -->
    <script defer>
      window.ga = window.ga || function () { (ga.q = ga.q || []).push(arguments) };
      ga.l = +new Date;
      ga('create', 'UA-166769908-1', 'auto');
      ga('send', 'pageview');
    </script>
    <script async src='https://www.google-analytics.com/analytics.js'></script>
  

  

  

  

  





<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
